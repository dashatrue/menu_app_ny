<!-- templates/menu_app/menu_app.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ –ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ú–µ–Ω—é üéÑ</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Ñ–æ–Ω */
        body {
            background: linear-gradient(135deg, #0d1b2a 0%, #1b3a5c 50%, #0d1b2a 100%);
            background-attachment: fixed;
            color: #e0e1dd;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* –°–Ω–µ–≥ */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .snow {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to { transform: translateY(100vh); }
        }

        /* –ì–∏—Ä–ª—è–Ω–¥–∞ */
        .garland {
            position: fixed;
            top: 20px;
            width: 100%;
            height: 40px;
            z-index: 2;
            pointer-events: none;
        }

        .light {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin: 0 15px;
            animation: blink 1.5s infinite;
            position: relative;
            top: 0;
        }

        @keyframes blink {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .container {
            background: rgba(13, 27, 42, 0.85);
            border-radius: 20px;
            padding: 30px;
            margin-top: 80px;
            margin-bottom: 50px;
            border: 3px solid #ffd700;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.3);
            position: relative;
            z-index: 3;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
        .title-container {
            background: linear-gradient(45deg, #1a4d80, #0a2d52);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 40px;
            border: 2px solid #ffd700;
            position: relative;
            overflow: hidden;
        }

        .title-container::before {
            content: "üéÑ üéÖ üéÑ";
            position: absolute;
            top: 10px;
            left: 20px;
            font-size: 24px;
            opacity: 0.7;
        }

        .title-container::after {
            content: "‚ú® ‚ùÑÔ∏è ‚ú®";
            position: absolute;
            bottom: 10px;
            right: 20px;
            font-size: 24px;
            opacity: 0.7;
        }

        h1 {
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            font-weight: bold;
            margin: 0;
            text-align: center;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –±–ª—é–¥ */
        .dish-card {
            background: linear-gradient(145deg, #1e3a5f, #152642);
            border: 2px solid #3a86ff;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            height: 100%;
            position: relative;
        }

        .dish-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: #ffd700;
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
        }

        .dish-card.selected {
            border-color: #ffd700;
            background: linear-gradient(145deg, #2a4d7a, #1a3a5a);
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.5);
        }

        .dish-card.selected::after {
            content: "üéÅ –í–´–ë–†–ê–ù–û!";
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ffd700;
            color: #0d1b2a;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ô –†–ê–ó–ú–ï–† –ö–ê–†–¢–ò–ù–û–ö */
        .card-img-top {
            width: 100%;
            height: 200px;
            object-fit: contain;
            background-color: #1a3a5a;
            border-bottom: 2px solid #3a86ff;
        }

        .card-body {
            padding: 20px;
        }

        .card-title {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn-outline-primary {
            color: #4cc9f0;
            border-color: #4cc9f0;
            background: transparent;
            transition: all 0.3s;
        }

        .btn-outline-primary:hover {
            background: #4cc9f0;
            color: #0d1b2a;
            border-color: #4cc9f0;
            transform: scale(1.05);
        }

        .btn-success {
            background-color: #28a745 !important;
            border-color: #28a745 !important;
        }

        /* –§–æ—Ä–º–∞ –¥–∞–Ω–Ω—ã—Ö */
        .form-card {
            background: linear-gradient(145deg, #1e3a5f, #152642);
            border: 2px solid #3a86ff;
            border-radius: 15px;
            overflow: hidden;
        }

        .form-card .card-header {
            background: linear-gradient(90deg, #1a4d80, #0a2d52);
            color: #ffd700;
            border-bottom: 2px solid #ffd700;
            font-size: 1.5rem;
            text-align: center;
            padding: 20px;
        }

        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #3a86ff;
            color: #fff;
            border-radius: 10px;
            padding: 12px;
        }

        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: #ffd700;
            color: #fff;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        /* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ - –§–ò–ö–° */
        .btn-submit {
            background: linear-gradient(45deg, #ff6b6b, #ffd166) !important;
            border: none !important;
            color: #0d1b2a !important;
            font-weight: bold !important;
            font-size: 1.2rem !important;
            padding: 15px 40px !important;
            border-radius: 50px !important;
            transition: all 0.3s !important;
            position: relative !important;
            overflow: hidden !important;
            display: inline-block !important;
        }

        .btn-submit:hover {
            transform: scale(1.05) !important;
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.5) !important;
        }

        .btn-submit:disabled {
            opacity: 0.7 !important;
            cursor: not-allowed !important;
        }

        .btn-submit::after {
            content: "üéÖ" !important;
            position: absolute !important;
            right: 20px !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            font-size: 1.5rem !important;
        }

        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .category-title {
            color: #4cc9f0;
            text-align: center;
            margin: 40px 0 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #4cc9f0;
            position: relative;
            font-size: 2rem;
        }

        .category-title::before {
            content: "‚ú®";
            position: absolute;
            left: 10px;
        }

        .category-title::after {
            content: "‚ú®";
            position: absolute;
            right: 10px;
        }

        /* –°–æ–æ–±—â–µ–Ω–∏—è */
        .alert {
            border-radius: 15px;
            border: none;
            font-weight: bold;
        }

        /* –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —É–∫—Ä–∞—à–µ–Ω–∏—è –ø–æ —É–≥–ª–∞–º */
        .decoration {
            position: absolute;
            font-size: 2rem;
            z-index: 2;
            opacity: 0.7;
            animation: float 3s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .dec-1 { top: 20px; left: 20px; }
        .dec-2 { top: 20px; right: 20px; }
        .dec-3 { bottom: 20px; left: 20px; }
        .dec-4 { bottom: 20px; right: 20px; }
    </style>
</head>
<body>
    <!-- –°–Ω–µ–≥ -->
    <div class="snow-container" id="snow"></div>

    <!-- –ì–∏—Ä–ª—è–Ω–¥–∞ -->
    <div class="garland text-center" id="garland"></div>

    <!-- –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —É–∫—Ä–∞—à–µ–Ω–∏—è -->
    <div class="decoration dec-1">üéÑ</div>
    <div class="decoration dec-2">üéÅ</div>
    <div class="decoration dec-3">‚ùÑÔ∏è</div>
    <div class="decoration dec-4">üåü</div>

    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="title-container">
            <h1><i class="fas fa-star"></i> üéÑ –ù–û–í–û–ì–û–î–ù–ï–ï –ú–ï–ù–Æ 2026 üéÑ <i class="fas fa-star"></i></h1>
            <p class="text-center mt-3 mb-0">–í—ã–±–µ—Ä–∏ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è –±–ª—é–¥–∞ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ —Å—Ç–æ–ª–∞!</p>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è Django -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
                    <i class="fas fa-gift me-2"></i>{{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}

        <!-- –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
        <form method="post" action="{% url 'order_submit' %}">
            {% csrf_token %}

            <!-- –ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞ -->
            <div class="mb-5">
                <h3 class="category-title"><i class="fas fa-utensils me-2"></i>–ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞</h3>
                <div class="row">
                    {% for dish in first_dishes %}
                    <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                        <div class="card dish-card" data-type="first" data-id="{{ dish.id }}">
                            {% if dish.image_url %}
                                <img src="{{ dish.image_url }}" class="card-img-top" alt="{{ dish.name }}">
                            {% elif dish.image_filename %}
                                <img src="/static/dishes/{{ dish.image_filename }}" class="card-img-top" alt="{{ dish.name }}">
                            {% else %}
                                <img src="https://via.placeholder.com/300x200/1e3a5f/e0e1dd?text={{ dish.name|urlencode }}" class="card-img-top" alt="{{ dish.name }}">
                            {% endif %}
                            <div class="card-body">
                                <h5 class="card-title">{{ dish.name }}</h5>
                                <input type="checkbox" name="first_dish" value="{{ dish.id }}"
                                       id="first_{{ dish.id }}" class="d-none">
                                <label for="first_{{ dish.id }}" class="btn btn-outline-primary w-100">
                                    <i class="fas fa-check me-2"></i>–í—ã–±—Ä–∞—Ç—å
                                </label>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-4">
                        <div class="alert alert-info">
                            <i class="fas fa-snowflake me-2"></i>–°–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏–º –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ —Å—É–ø—á–∏–∫–∏!
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- –°–∞–ª–∞—Ç—ã -->
            <div class="mb-5">
                <h3 class="category-title"><i class="fas fa-leaf me-2"></i>–°–∞–ª–∞—Ç—ã</h3>
                <div class="row">
                    {% for dish in salads %}
                    <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                        <div class="card dish-card" data-type="salad" data-id="{{ dish.id }}">
                            {% if dish.image_url %}
                                <img src="{{ dish.image_url }}" class="card-img-top" alt="{{ dish.name }}">
                            {% elif dish.image_filename %}
                                <img src="/static/dishes/{{ dish.image_filename }}" class="card-img-top" alt="{{ dish.name }}">
                            {% else %}
                                <img src="https://via.placeholder.com/300x200/1e3a5f/e0e1dd?text={{ dish.name|urlencode }}" class="card-img-top" alt="{{ dish.name }}">
                            {% endif %}
                            <div class="card-body">
                                <h5 class="card-title">{{ dish.name }}</h5>
                                <input type="checkbox" name="salad" value="{{ dish.id }}"
                                       id="salad_{{ dish.id }}" class="d-none">
                                <label for="salad_{{ dish.id }}" class="btn btn-outline-primary w-100">
                                    <i class="fas fa-check me-2"></i>–í—ã–±—Ä–∞—Ç—å
                                </label>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-4">
                        <div class="alert alert-info">
                            <i class="fas fa-snowflake me-2"></i>–°–∞–ª–∞—Ç—ã –≥–æ—Ç–æ–≤—è—Ç—Å—è –∫ –ø—Ä–∞–∑–¥–Ω–∏–∫—É!
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- –ó–∞–∫—É—Å–∫–∏ -->
            <div class="mb-5">
                <h3 class="category-title"><i class="fas fa-cheese me-2"></i>–ó–∞–∫—É—Å–∫–∏</h3>
                <div class="row">
                    {% for dish in appetizers %}
                    <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                        <div class="card dish-card" data-type="appetizer" data-id="{{ dish.id }}">
                            {% if dish.image_url %}
                                <img src="{{ dish.image_url }}" class="card-img-top" alt="{{ dish.name }}">
                            {% elif dish.image_filename %}
                                <img src="/static/dishes/{{ dish.image_filename }}" class="card-img-top" alt="{{ dish.name }}">
                            {% else %}
                                <img src="https://via.placeholder.com/300x200/1e3a5f/e0e1dd?text={{ dish.name|urlencode }}" class="card-img-top" alt="{{ dish.name }}">
                            {% endif %}
                            <div class="card-body">
                                <h5 class="card-title">{{ dish.name }}</h5>
                                <input type="checkbox" name="appetizer" value="{{ dish.id }}"
                                       id="appetizer_{{ dish.id }}" class="d-none">
                                <label for="appetizer_{{ dish.id }}" class="btn btn-outline-primary w-100">
                                    <i class="fas fa-check me-2"></i>–í—ã–±—Ä–∞—Ç—å
                                </label>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-4">
                        <div class="alert alert-info">
                            <i class="fas fa-snowflake me-2"></i>–ó–∞–∫—É—Å–∫–∏ –Ω–∞ –ø–æ–¥—Ö–æ–¥–µ!
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- –î–µ—Å–µ—Ä—Ç—ã -->
            <div class="mb-5">
                <h3 class="category-title"><i class="fas fa-birthday-cake me-2"></i>–î–µ—Å–µ—Ä—Ç—ã</h3>
                <div class="row">
                    {% for dish in desserts %}
                    <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                        <div class="card dish-card" data-type="dessert" data-id="{{ dish.id }}">
                            {% if dish.image_url %}
                                <img src="{{ dish.image_url }}" class="card-img-top" alt="{{ dish.name }}">
                            {% elif dish.image_filename %}
                                <img src="/static/dishes/{{ dish.image_filename }}" class="card-img-top" alt="{{ dish.name }}">
                            {% else %}
                                <img src="https://via.placeholder.com/300x200/1e3a5f/e0e1dd?text={{ dish.name|urlencode }}" class="card-img-top" alt="{{ dish.name }}">
                            {% endif %}
                            <div class="card-body">
                                <h5 class="card-title">{{ dish.name }}</h5>
                                <input type="checkbox" name="dessert" value="{{ dish.id }}"
                                       id="dessert_{{ dish.id }}" class="d-none">
                                <label for="dessert_{{ dish.id }}" class="btn btn-outline-primary w-100">
                                    <i class="fas fa-check me-2"></i>–í—ã–±—Ä–∞—Ç—å
                                </label>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-4">
                        <div class="alert alert-info">
                            <i class="fas fa-snowflake me-2"></i>–î–µ—Å–µ—Ä—Ç—ã —Å–∫–æ—Ä–æ –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã!
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- –§–æ—Ä–º–∞ –¥–∞–Ω–Ω—ã—Ö -->
            <div class="card form-card mb-5">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="id_customer_name" class="form-label">
                                <i class="fas fa-snowman me-2"></i>–¢–≤–æ–µ –∏–º—è
                            </label>
                            <input type="text" class="form-control" id="id_customer_name"
                                   name="customer_name" required placeholder="–ù–∞–ø–∏—à–∏ —Å–≤–æ–µ –∏–º—è =)">
                        </div>
                        <div class="col-12 mb-3">
                            <label for="id_comments" class="form-label">
                                <i class="fas fa-star me-2"></i>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–∫–∞–∑—É
                            </label>
                            <textarea class="form-control" id="id_comments"
                                      name="comments" rows="3"
                                      placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è..."></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
            <div class="text-center">
                <button type="submit" class="btn btn-submit">
                    <i class="fas fa-paper-plane me-2"></i>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–π –∑–∞–∫–∞–∑!
                </button>
            </div>
        </form>

        <!-- –ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ -->
        <div class="text-center mt-5 pt-4 border-top border-secondary">
            <p class="h4 text-warning">
                <i class="fas fa-tree"></i> –° –ù–∞—Å—Ç—É–ø–∞—é—â–∏–º –ù–æ–≤—ã–º –ì–æ–¥–æ–º! <i class="fas fa-tree"></i>
            </p>
            <p>–ü—É—Å—Ç—å —ç—Ç–æ—Ç –ø—Ä–∞–∑–¥–Ω–∏–∫ –ø—Ä–∏–Ω–µ—Å–µ—Ç –º–Ω–æ–≥–æ –≤–∫—É—Å–Ω—ã—Ö –±–ª—é–¥ –∏ —Ä–∞–¥–æ—Å—Ç–∏!</p>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript –¥–ª—è –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ -->
    <script>
        // –°–Ω–µ–≥
        function createSnow() {
            const snowContainer = document.getElementById('snow');
            for (let i = 0; i < 100; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snow');

                const size = Math.random() * 5 + 3;
                const startX = Math.random() * 100;
                const duration = Math.random() * 10 + 5;
                const delay = Math.random() * 5;

                snowflake.style.width = `${size}px`;
                snowflake.style.height = `${size}px`;
                snowflake.style.left = `${startX}vw`;
                snowflake.style.animationDuration = `${duration}s`;
                snowflake.style.animationDelay = `${delay}s`;

                snowContainer.appendChild(snowflake);
            }
        }

        // –ì–∏—Ä–ª—è–Ω–¥–∞
        function createGarland() {
            const garland = document.getElementById('garland');
            const colors = ['#ff0000', '#00ff00', '#ffff00', '#ff00ff', '#00ffff', '#ffa500'];

            for (let i = 0; i < 30; i++) {
                const light = document.createElement('span');
                light.classList.add('light');
                light.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                light.style.animationDelay = `${Math.random() * 2}s`;
                garland.appendChild(light);
            }
        }

        // –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ö–û–î –î–õ–Ø –í–´–ë–û–†–ê –ë–õ–Æ–î
        document.addEventListener('DOMContentLoaded', function() {
            createSnow();
            createGarland();

            // 1. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –±–ª—é–¥–∞
            document.querySelectorAll('.dish-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–ª–∏–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
                    if (e.target.tagName === 'LABEL' || e.target.tagName === 'BUTTON' || e.target.closest('label')) {
                        return;
                    }

                    const input = this.querySelector('input[type="checkbox"]');
                    if (input) {
                        input.checked = !input.checked;
                        updateCardSelection(this, input.checked);
                    }
                });
            });

            // 2. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–í—ã–±—Ä–∞—Ç—å"
            document.querySelectorAll('.dish-card label').forEach(label => {
                label.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    const card = this.closest('.dish-card');
                    const input = card.querySelector('input[type="checkbox"]');

                    if (input) {
                        input.checked = !input.checked;
                        updateCardSelection(card, input.checked);
                    }
                });
            });

            // 3. –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏
            function updateCardSelection(card, isSelected) {
                const button = card.querySelector('label');

                if (isSelected) {
                    card.classList.add('selected');
                    if (button) {
                        button.innerHTML = '<i class="fas fa-times me-2"></i>–û—Ç–º–µ–Ω–∏—Ç—å';
                        button.classList.remove('btn-outline-primary');
                        button.classList.add('btn-success');
                    }
                } else {
                    card.classList.remove('selected');
                    if (button) {
                        button.innerHTML = '<i class="fas fa-check me-2"></i>–í—ã–±—Ä–∞—Ç—å';
                        button.classList.remove('btn-success');
                        button.classList.add('btn-outline-primary');
                    }
                }
            }

            // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã
            document.querySelector('form').addEventListener('submit', function(e) {
                const selectedCount = document.querySelectorAll('input[type="checkbox"]:checked').length;
                const name = document.getElementById('id_customer_name').value.trim();

                if (selectedCount === 0) {
                    e.preventDefault();
                    alert('üéÖ –í—ã–±–µ—Ä–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –±–ª—é–¥–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–≥–æ —Å—Ç–æ–ª–∞!');
                    return false;
                }

                if (!name) {
                    e.preventDefault();
                    alert('üéÖ –ù–µ –∑–∞–±—É–¥—å —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–µ –∏–º—è!');
                    return false;
                }

                // –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                const submitBtn = document.querySelector('.btn-submit');
                if (submitBtn) {
                    if (!confirm('üéÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–π –∑–∞–∫–∞–∑? –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–∞—á–Ω–µ—Ç—Å—è –≤–æ–ª—à–µ–±—Å—Ç–≤–æ!')) {
                        e.preventDefault();
                        return false;
                    }

                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>–û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';
                    submitBtn.disabled = true;
                }
            });

            // 5. –§–∏–∫—Å –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
            const submitBtn = document.querySelector('.btn-submit');
            if (submitBtn) {
                submitBtn.style.cssText = `
                    background: linear-gradient(45deg, #ff6b6b, #ffd166) !important;
                    border: none !important;
                    color: #0d1b2a !important;
                    font-weight: bold !important;
                    font-size: 1.2rem !important;
                    padding: 15px 40px !important;
                    border-radius: 50px !important;
                    position: relative !important;
                `;
            }
        });
    </script>
</body>
</html>